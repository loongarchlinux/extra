# Maintainer: Torsten Ke√üler <tpkessler@archlinux.org>
pkgname=intel-oneapi-tcm
_pkgver=1.0
pkgver=1.0.0
_debpkgrel=435
pkgrel=1
pkgdesc="Thread Composability Manager"
arch=('loong64' 'x86_64')
url="https://www.intel.com/content/www/us/en/developer/tools/oneapi/overview.html"
license=('LicenseRef-Intel-Simplified')
depends=('intel-oneapi-common' 'glibc' 'gcc-libs' 'hwloc')
source=("https://apt.repos.intel.com/oneapi/pool/main/${pkgname}-${_pkgver}-${pkgver}-${_debpkgrel}_amd64.deb")
b2sums=('b1430dac410091132e8094fb2b5748eda9abeb83bd92f7e3de7f1e88ef58c22010a0a48cff40604696678f75732570b34d9370861e8b394b11df60297f7e39ab')
noextract=("${pkgname}-${_pkgver}-${pkgver}-${_debpkgrel}_amd64.deb")

package() {
	ar x "${pkgname}-${_pkgver}-${pkgver}-${_debpkgrel}_amd64.deb"
	tar xvf data.tar.xz -C "${pkgdir}"
	rm data.tar.xz
	rm -r "${pkgdir}"/opt/intel/oneapi/tcm/${_pkgver}/lib32

	install -d "${pkgdir}"/usr/share/licenses/"${pkgname}"
	ln -s /usr/share/licenses/intel-oneapi "${pkgdir}"/usr/share/licenses/"${pkgname}"/oneapi
}
