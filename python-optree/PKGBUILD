# Maintainer: Lukas Fleischer <lfleischer@archlinux.org>

_name=optree
pkgname=python-"${_name}"
pkgver=0.11.0
pkgrel=2
pkgdesc="Optimized PyTree Utilities"
arch=(any)
url="https://github.com/metaopt/optree"
license=(Apache-2.0)
depends=(python python-typing_extensions)
makedepends=(python-setuptools python-build python-installer python-wheel cmake gcc pybind11)
source=("$_name-$pkgver.tar.gz::$url/archive/refs/tags/v$pkgver.tar.gz")
sha512sums=('b179a6bee474c09c8d1de7b3f2f17025d9e1ba6fb71aecea467a9201d3fafdb0777c61e313d4db8a2a1245435c34346745f92adb37a93bf3c860ae8406369bef')
b2sums=('5e4dcc99308ba30f87e98025e0395f8ad3b8fd579c24f1c8220d12c0b86cb9e19a1185f1ae2601db32c87558fb2ab82503d6fafd8f673ab7f3939c12dce42e7b')

build() {
	cd "$_name-$pkgver"
	python -m build --wheel --no-isolation
}

package() {
	cd "$_name-$pkgver"
	python -m installer --destdir="$pkgdir" dist/*.whl
	install -vDm 644 LICENSE -t "$pkgdir/usr/share/licenses/$pkgname/"
}
