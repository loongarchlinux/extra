# Maintainer: Alexander F. RÃ¸dseth <xyproto@archlinux.org>

pkgname=png2svg
pkgver=1.5.4
pkgrel=1
pkgdesc='Convert small PNG images to SVG Tiny 1.2'
arch=(loong64 x86_64)
url='https://github.com/xyproto/png2svg'
license=(BSD-3-Clause)
makedepends=(git go)
options=(!lto)
source=("git+$url#commit=5f6e955b3f0bd0d042e5832e0dd1697a657f2ad3") # tag: v1.5.4
b2sums=('SKIP')

build() {
  cd $pkgname/cmd/$pkgname
  go build -v -mod=vendor -trimpath -buildmode=pie -ldflags="-s -w -extldflags '$LDFLAGS'"
}

package() {
  install -Dm755 $pkgname/cmd/$pkgname/$pkgname "$pkgdir/usr/bin/$pkgname"
  install -Dm755 $pkgname/LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
