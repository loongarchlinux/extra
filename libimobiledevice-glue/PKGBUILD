# Maintainer:

pkgname=libimobiledevice-glue
pkgver=1.2.0
pkgrel=1
pkgdesc='A library with common code used by libraries and tools around the libimobiledevice project'
arch=('loong64' 'x86_64')
url='https://libimobiledevice.org/'
license=('LGPL-2.1-or-later')
depends=('glibc' 'libplist')
source=("https://github.com/libimobiledevice/$pkgname/releases/download/$pkgver/$pkgname-$pkgver.tar.bz2")
sha256sums=('ff9cbc240c9780edfa43914a057b86362054053721b65fb04f54a25023b92b62')

build() (
  cd $pkgname-$pkgver
  ./configure --prefix=/usr
  sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
  make
)

package() {
  cd $pkgname-$pkgver
  make DESTDIR="$pkgdir" install
}
